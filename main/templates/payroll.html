{% extends "main.html" %}

{% block content %}

<div class="container-fluid px-5">
    <h1 class="mb-4">Manage Payroll</h1>

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" href="#payroll" id="managePayroll"
                onclick="toggleTab(event, 'Payroll');">Payroll</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#tiers" id="manageTiers"
                onclick="toggleTab(event, 'Tiers');">Tiers</a>
        </li>
    </ul>
    {% if "messages" in response %}
    {% if "ERROR" in response["messages"] %}
    <div class="alert alert-warning" role="alert">
        {{ response["messages"] }}
    </div>
    {% else %}
    <div class="alert alert-success" role="alert">
        {{ response["messages"] }}
    </div>
    {% endif %}
    {% endif %}

    <div id="Payroll" class="tabcontent">
		<div class="d-flex flex-column bd-highlight">
			<div class="pt-2 bd-highlight">
				<a href="#" id="addPayrollButton" onclick="toggleForm('PayrollForm');"
					style="float:right;"><button class="btn btn-outline-primary btn-sm" type="button">Add
						Job Listing</button></a>
			</div>
			<div class="bd-highlight">
				<div id="PayrollForm" class="PayrollForm">
					<div class="card containter-fluid mb-3">
						<div class="card-header">
							Add Payroll
						</div>
						<form action="/people/contractors/create" method="POST" autocomplete="off">
							<div class="card-body">
								<div class="form-group d-flex flex-row justify-content-between mb-2">
									<div class="col-xs-2">
										<label for="salutation">Salutation</label>
										<select class="form-control" id="salutation" name="salutation"
											value="{{request.form['salutation']}}">
											<option>Mr</option>
											<option>Mrs</option>
											<option>Ms</option>
										</select>
									</div>
									<div class="col-xs-3 flex-grow-1 ml-4">
										<label for="first_name">First Name</label>
										<input type="text" class="form-control" id="first_name" name="first_name"
											type="text" value="{{request.form['first_name']}}">
									</div>
									<div class="col-xs-4 flex-grow-1 ml-4">
										<label for="last_name">Last Name</label>
										<input type="text" class="form-control" id="last_name" name="last_name"
											type="text" value="{{request.form['last_name']}}">
									</div>
								</div>
								<div class="form-group d-flex flex-row justify-content-between mb-2">
									<div class="col-xs-3 flex-grow-1 mr-4">
										<label for="email">Email Address</label>
										<input class="form-control" id="email" name="email" type="text"
											value="{{request.form['email']}}">
									</div>
									<div class="col-xs-3">
										<label for="validationCustomUsername">Username</label>
										<div class="input-group">
											<span class="input-group-text" id="inputGroupPrepend">@</span>
											<input type="text" class="form-control" id="username" name="username"
												value="{{request.form['username']}}">
										</div>
									</div>
								</div>
								<div class="form-group d-flex flex-row justify-content-between mb-2">
									<div class="col-xs-3 flex-grow-1 mr-4">
										<label for="validationCustomUsername">Phone Number</label>
										<div class="input-group">
											<input type="text" class="form-control" id="phone_number"
												name="phone_number" aria-describedby="inputGroupPrepend"
												value="{{request.form['phone_number']}}">
										</div>
									</div>
									<div class="col-xs-3">
										<label for="validationCustomUsername">Tier</label>
										<div class="input-group">
											<input type="text" class="form-control" id="user_role" name="user_role"
												aria-describedby="inputGroupPrepend"
												value="{{request.form['user_role']}}">
										</div>
									</div>
								</div>
								<div class="form-group d-flex flex-row justify-content-between mb-2">
									<div class="col-xs-3 flex-grow-1 mr-4">
										<label for="validationCustomUsername">Address Line</label>
										<div class="input-group">
											<input type="text" class="form-control" id="addr_line" name="addr_line"
												aria-describedby="inputGroupPrepend"
												value="{{request.form['addr_line']}}">
										</div>
									</div>
								</div>
								<div class="form-group d-flex flex-row justify-content-between mb-2">
									<div class="col-xs-3 flex-grow-1 mr-4">
										<label for="validationCustomUsername">City</label>
										<div class="input-group">
											<input type="text" class="form-control" id="addr_city" name="addr_city"
												aria-describedby="inputGroupPrepend"
												value="{{request.form['addr_city']}}">
										</div>
									</div>
									<div class="col-xs-3 flex-grow-1 mr-4">
										<label for="validationCustomUsername">Country</label>
										<div class="input-group">
											<input type="text" class="form-control" id="addr_county" name="addr_county"
												aria-describedby="inputGroupPrepend"
												value="{{request.form['addr_county']}}">
										</div>
									</div>
									<div class="col-xs-3">
										<label for="validationCustomUsername">Postal Code</label>
										<div class="input-group">
											<input type="text" class="form-control" id="addr_zip" name="addr_zip"
												aria-describedby="inputGroupPrepend"
												value="{{request.form['addr_zip']}}">
										</div>
									</div>
								</div>
							</div>
							<div class="card-footer">
								<button type="submit" class="btn btn-primary">Submit</button>
								<a href="#" id="cancelPayrollButton" onclick="toggleForm('PayrollForm');"
									style="float:right;"><button class="btn btn-outline-danger"
										type="button">Cancel</button></a>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		{% if "myapplications" in response and response["myapplications"] != None %}

		<table class="table table-sm table-hover table-bordered shadow-sm text-center mt-2">
			<thead>
				<tr class="text-center" style="background-color:#D6EAF8">
					<th scope="col" colspan="2" style="width:10%">Action</th>
					<th scope="col">Username</th>
					<th scope="col">First Name</th>
					<th scope="col">Last Name</th>
					<th scope="col">Email</th>
				</tr>
			</thead>
			<tbody>
				{% for item in response["myapplications"] %}
				<tr>
					<td class="text-center"><a href="#edit"><i class="fa-solid fa-edit fa-flip-horizontal "></i></a>
					</td>
					<td class="text-center"><a href="#delete"><i class="fa-solid fa-trash fa-flip-horizontal"></i></a>
					</td>
					<td>{{item.username}}</td>
					<td>{{item.first_name}}</td>
					<td>{{item.last_name}}</td>
					<td>{{item.email}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<p class="text-center text-muted">No payrolls found. Click on <a href="#" id="addPayrollButton"
				onclick="toggleForm('PayrollForm');">"Add Payroll"</a> button to create payroll details in the
			system.
		</p>
		{% endif %}
	</div>
</div>
{% endblock content %}